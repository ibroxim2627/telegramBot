{"code":"!function(e,t){for(var s in t)e[s]=t[s]}(exports,function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"\",s(s.s=112)}([function(e,t){e.exports=require(\"util\")},function(e,t){e.exports=require(\"crypto\")},,,,function(e,t){e.exports=require(\"fs\")},function(e,t){e.exports=require(\"stream\")},,,,function(e,t){e.exports=require(\"path\")},function(e,t){e.exports=require(\"events\")},,,function(e,t){e.exports=require(\"net\")},,,,,,,,,function(e,t,s){\"use strict\";const r=s(24);var n=function(e,t){if(null==e)return null;if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){var s=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return s.length===e.byteLength?s:s.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?r.parseInputDatesAsUTC?function(e){var t=e.getUTCFullYear(),s=t<1;s&&(t=Math.abs(t)+1);var r=i(t,4)+\"-\"+i(e.getUTCMonth()+1,2)+\"-\"+i(e.getUTCDate(),2)+\"T\"+i(e.getUTCHours(),2)+\":\"+i(e.getUTCMinutes(),2)+\":\"+i(e.getUTCSeconds(),2)+\".\"+i(e.getUTCMilliseconds(),3);r+=\"+00:00\",s&&(r+=\" BC\");return r}(e):function(e){var t=-e.getTimezoneOffset(),s=e.getFullYear(),r=s<1;r&&(s=Math.abs(s)+1);var n=i(s,4)+\"-\"+i(e.getMonth()+1,2)+\"-\"+i(e.getDate(),2)+\"T\"+i(e.getHours(),2)+\":\"+i(e.getMinutes(),2)+\":\"+i(e.getSeconds(),2)+\".\"+i(e.getMilliseconds(),3);t<0?(n+=\"-\",t*=-1):n+=\"+\";n+=i(Math.floor(t/60),2)+\":\"+i(t%60,2),r&&(n+=\" BC\");return n}(e):Array.isArray(e)?function e(t){for(var s=\"{\",r=0;r<t.length;r++)if(r>0&&(s+=\",\"),null===t[r]||void 0===t[r])s+=\"NULL\";else if(Array.isArray(t[r]))s+=e(t[r]);else if(ArrayBuffer.isView(t[r])){var i=t[r];if(!(i instanceof Buffer)){var o=Buffer.from(i.buffer,i.byteOffset,i.byteLength);i=o.length===i.byteLength?o:o.slice(i.byteOffset,i.byteOffset+i.byteLength)}s+=\"\\\\\\\\x\"+i.toString(\"hex\")}else s+='\"'+n(t[r]).replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"')+'\"';return s+=\"}\"}(e):\"object\"==typeof e?function(e,t){if(e&&\"function\"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw new Error('circular reference detected while preparing \"'+e+'\" for query');return t.push(e),n(e.toPostgres(n),t)}return JSON.stringify(e)}(e,t):e.toString()};function i(e,t){for(e=\"\"+e;e.length<t;)e=\"0\"+e;return e}e.exports={prepareValue:function(e){return n(e)},normalizeQueryConfig:function(e,t,s){return e=\"string\"==typeof e?{text:e}:e,t&&(\"function\"==typeof t?e.callback=t:e.values=t),s&&(e.callback=s),e},escapeIdentifier:function(e){return'\"'+e.replace(/\"/g,'\"\"')+'\"'},escapeLiteral:function(e){for(var t=!1,s=\"'\",r=0;r<e.length;r++){var n=e[r];\"'\"===n?s+=n+n:\"\\\\\"===n?(s+=n+n,t=!0):s+=n}return s+=\"'\",!0===t&&(s=\" E\"+s),s}}},function(e,t,s){\"use strict\";e.exports={host:\"localhost\",user:\"win32\"===process.platform?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:\"\",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var r=s(25),n=r.getTypeParser(20,\"text\"),i=r.getTypeParser(1016,\"text\");e.exports.__defineSetter__(\"parseInt8\",(function(e){r.setTypeParser(20,\"text\",e?r.getTypeParser(23,\"text\"):n),r.setTypeParser(1016,\"text\",e?r.getTypeParser(1007,\"text\"):i)}))},function(e,t,s){var r=s(114),n=s(119),i=s(56),o=s(121);t.getTypeParser=function(e,t){if(!a[t=t||\"text\"])return c;return a[t][e]||c},t.setTypeParser=function(e,t,s){\"function\"==typeof t&&(s=t,t=\"text\");a[t][e]=s},t.arrayParser=i,t.builtins=o;var a={text:{},binary:{}};function c(e){return String(e)}r.init((function(e,t){a.text[e]=t})),n.init((function(e,t){a.binary[e]=t}))},,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=require(\"tls\")},,,,,function(e,t,s){\"use strict\";var r=s(113),n=s(24),i=s(60),o=s(138);const{DatabaseError:a}=s(61),{escapeIdentifier:c,escapeLiteral:u}=s(23),h=e=>class extends o{constructor(t){super(t,e)}};var l=function(e){this.defaults=n,this.Client=e,this.Query=this.Client.Query,this.Pool=h(this.Client),this._pools=[],this.Connection=i,this.types=s(25),this.DatabaseError=a,this.escapeIdentifier=c,this.escapeLiteral=u};void 0!==process.env.NODE_PG_FORCE_NATIVE?e.exports=new l(s(63)):(e.exports=new l(r),Object.defineProperty(e.exports,\"native\",{configurable:!0,enumerable:!1,get(){var t=null;try{t=new l(s(63))}catch(e){if(\"MODULE_NOT_FOUND\"!==e.code)throw e}return Object.defineProperty(e.exports,\"native\",{value:t}),t}}))},function(e,t,s){\"use strict\";t.parse=function(e,t){return new r(e,t).parse()};class r{constructor(e,t){this.source=e,this.transform=t||n,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return\"\\\\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&(\"NULL\"!==(t=this.recorded.join(\"\"))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if(\"[\"===this.source[0])for(;!this.isEof();){if(\"=\"===this.nextCharacter().value)break}}parse(e){var t,s,n;for(this.consumeDimensions();!this.isEof();)if(\"{\"!==(t=this.nextCharacter()).value||n){if(\"}\"!==t.value||n)'\"'!==t.value||t.escaped?\",\"!==t.value||n?this.record(t.value):this.newEntry():(n&&this.newEntry(!0),n=!n);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(s=new r(this.source.substr(this.position-1),this.transform),this.entries.push(s.parse(!0)),this.position+=s.position-2);if(0!==this.dimension)throw new Error(\"array dimension not balanced\");return this.entries}}function n(e){return e}},function(e,t,s){var r=s(55);e.exports={create:function(e,t){return{parse:function(){return r.parse(e,t)}}}}},function(e,t,s){\"use strict\";const r=parseInt(process.versions&&process.versions.node&&process.versions.node.split(\".\")[0])<15;e.exports=s(r?123:124)},function(e,t,s){\"use strict\";var r=s(25);function n(e){this._types=e||r,this.text={},this.binary={}}n.prototype.getOverrides=function(e){switch(e){case\"text\":return this.text;case\"binary\":return this.binary;default:return{}}},n.prototype.setTypeParser=function(e,t,s){\"function\"==typeof t&&(s=t,t=\"text\"),this.getOverrides(t)[e]=s},n.prototype.getTypeParser=function(e,t){return t=t||\"text\",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)},e.exports=n},function(e,t,s){\"use strict\";var r=s(125),n=s(24),i=s(126).parse,o=function(e,t,s){return void 0===s?s=process.env[\"PG\"+e.toUpperCase()]:!1===s||(s=process.env[s]),t[e]||s||n[e]},a=function(e){return\"'\"+(\"\"+e).replace(/\\\\/g,\"\\\\\\\\\").replace(/'/g,\"\\\\'\")+\"'\"},c=function(e,t,s){var r=t[s];null!=r&&e.push(s+\"=\"+a(r))};e.exports=class{constructor(e){(e=\"string\"==typeof e?i(e):e||{}).connectionString&&(e=Object.assign({},e,i(e.connectionString))),this.user=o(\"user\",e),this.database=o(\"database\",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(o(\"port\",e),10),this.host=o(\"host\",e),Object.defineProperty(this,\"password\",{configurable:!0,enumerable:!1,writable:!0,value:o(\"password\",e)}),this.binary=o(\"binary\",e),this.options=o(\"options\",e),this.ssl=void 0===e.ssl?function(){switch(process.env.PGSSLMODE){case\"disable\":return!1;case\"prefer\":case\"require\":case\"verify-ca\":case\"verify-full\":return!0;case\"no-verify\":return{rejectUnauthorized:!1}}return n.ssl}():e.ssl,\"string\"==typeof this.ssl&&\"true\"===this.ssl&&(this.ssl=!0),\"no-verify\"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,\"key\",{enumerable:!1}),this.client_encoding=o(\"client_encoding\",e),this.replication=o(\"replication\",e),this.isDomainSocket=!(this.host||\"\").indexOf(\"/\"),this.application_name=o(\"application_name\",e,\"PGAPPNAME\"),this.fallback_application_name=o(\"fallback_application_name\",e,!1),this.statement_timeout=o(\"statement_timeout\",e,!1),this.lock_timeout=o(\"lock_timeout\",e,!1),this.idle_in_transaction_session_timeout=o(\"idle_in_transaction_session_timeout\",e,!1),this.query_timeout=o(\"query_timeout\",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),\"number\"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var t=[];c(t,this,\"user\"),c(t,this,\"password\"),c(t,this,\"port\"),c(t,this,\"application_name\"),c(t,this,\"fallback_application_name\"),c(t,this,\"connect_timeout\"),c(t,this,\"options\");var s=\"object\"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(c(t,s,\"sslmode\"),c(t,s,\"sslca\"),c(t,s,\"sslkey\"),c(t,s,\"sslcert\"),c(t,s,\"sslrootcert\"),this.database&&t.push(\"dbname=\"+a(this.database)),this.replication&&t.push(\"replication=\"+a(this.replication)),this.host&&t.push(\"host=\"+a(this.host)),this.isDomainSocket)return e(null,t.join(\" \"));this.client_encoding&&t.push(\"client_encoding=\"+a(this.client_encoding)),r.lookup(this.host,(function(s,r){return s?e(s,null):(t.push(\"hostaddr=\"+a(r)),e(null,t.join(\" \")))}))}}},function(e,t,s){\"use strict\";s(14);var r=s(11).EventEmitter;const{parse:n,serialize:i}=s(61),{getStream:o,getSecureStream:a}=s(133),c=i.flush(),u=i.sync(),h=i.end();e.exports=class extends r{constructor(e){super(),e=e||{},this.stream=e.stream||o(e.ssl),\"function\"==typeof this.stream&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on(\"newListener\",(function(e){\"message\"===e&&(t._emitMessage=!0)}))}connect(e,t){var r=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,t),this.stream.once(\"connect\",(function(){r._keepAlive&&r.stream.setKeepAlive(!0,r._keepAliveInitialDelayMillis),r.emit(\"connect\")}));const n=function(e){(!r._ending||\"ECONNRESET\"!==e.code&&\"EPIPE\"!==e.code)&&r.emit(\"error\",e)};if(this.stream.on(\"error\",n),this.stream.on(\"close\",(function(){r.emit(\"end\")})),!this.ssl)return this.attachListeners(this.stream);this.stream.once(\"data\",(function(e){switch(e.toString(\"utf8\")){case\"S\":break;case\"N\":return r.stream.end(),r.emit(\"error\",new Error(\"The server does not support SSL connections\"));default:return r.stream.end(),r.emit(\"error\",new Error(\"There was an error establishing an SSL connection\"))}const i={socket:r.stream};!0!==r.ssl&&(Object.assign(i,r.ssl),\"key\"in r.ssl&&(i.key=r.ssl.key));var o=s(14);o.isIP&&0===o.isIP(t)&&(i.servername=t);try{r.stream=a(i)}catch(e){return r.emit(\"error\",e)}r.attachListeners(r.stream),r.stream.on(\"error\",n),r.emit(\"sslconnect\")}))}attachListeners(e){n(e,e=>{var t=\"error\"===e.name?\"errorMessage\":e.name;this._emitMessage&&this.emit(\"message\",e),this.emit(t,e)})}requestSsl(){this.stream.write(i.requestSsl())}startup(e){this.stream.write(i.startup(e))}cancel(e,t){this._send(i.cancel(e,t))}password(e){this._send(i.password(e))}sendSASLInitialResponseMessage(e,t){this._send(i.sendSASLInitialResponseMessage(e,t))}sendSCRAMClientFinalMessage(e){this._send(i.sendSCRAMClientFinalMessage(e))}_send(e){return!!this.stream.writable&&this.stream.write(e)}query(e){this._send(i.query(e))}parse(e){this._send(i.parse(e))}bind(e){this._send(i.bind(e))}execute(e){this._send(i.execute(e))}flush(){this.stream.writable&&this.stream.write(c)}sync(){this._ending=!0,this._send(u)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,this._connecting&&this.stream.writable)return this.stream.write(h,()=>{this.stream.end()});this.stream.end()}close(e){this._send(i.close(e))}describe(e){this._send(i.describe(e))}sendCopyFromChunk(e){this._send(i.copyData(e))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(e){this._send(i.copyFail(e))}}},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.DatabaseError=t.serialize=t.parse=void 0;const r=s(62);Object.defineProperty(t,\"DatabaseError\",{enumerable:!0,get:function(){return r.DatabaseError}});const n=s(129);Object.defineProperty(t,\"serialize\",{enumerable:!0,get:function(){return n.serialize}});const i=s(131);t.parse=function(e,t){const s=new i.Parser;return e.on(\"data\",e=>s.parse(e,t)),new Promise(t=>e.on(\"end\",()=>t()))}},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.NoticeMessage=t.DataRowMessage=t.CommandCompleteMessage=t.ReadyForQueryMessage=t.NotificationResponseMessage=t.BackendKeyDataMessage=t.AuthenticationMD5Password=t.ParameterStatusMessage=t.ParameterDescriptionMessage=t.RowDescriptionMessage=t.Field=t.CopyResponse=t.CopyDataMessage=t.DatabaseError=t.copyDone=t.emptyQuery=t.replicationStart=t.portalSuspended=t.noData=t.closeComplete=t.bindComplete=t.parseComplete=void 0,t.parseComplete={name:\"parseComplete\",length:5},t.bindComplete={name:\"bindComplete\",length:5},t.closeComplete={name:\"closeComplete\",length:5},t.noData={name:\"noData\",length:5},t.portalSuspended={name:\"portalSuspended\",length:5},t.replicationStart={name:\"replicationStart\",length:4},t.emptyQuery={name:\"emptyQuery\",length:4},t.copyDone={name:\"copyDone\",length:4};class r extends Error{constructor(e,t,s){super(e),this.length=t,this.name=s}}t.DatabaseError=r;t.CopyDataMessage=class{constructor(e,t){this.length=e,this.chunk=t,this.name=\"copyData\"}};t.CopyResponse=class{constructor(e,t,s,r){this.length=e,this.name=t,this.binary=s,this.columnTypes=new Array(r)}};t.Field=class{constructor(e,t,s,r,n,i,o){this.name=e,this.tableID=t,this.columnID=s,this.dataTypeID=r,this.dataTypeSize=n,this.dataTypeModifier=i,this.format=o}};t.RowDescriptionMessage=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name=\"rowDescription\",this.fields=new Array(this.fieldCount)}};t.ParameterDescriptionMessage=class{constructor(e,t){this.length=e,this.parameterCount=t,this.name=\"parameterDescription\",this.dataTypeIDs=new Array(this.parameterCount)}};t.ParameterStatusMessage=class{constructor(e,t,s){this.length=e,this.parameterName=t,this.parameterValue=s,this.name=\"parameterStatus\"}};t.AuthenticationMD5Password=class{constructor(e,t){this.length=e,this.salt=t,this.name=\"authenticationMD5Password\"}};t.BackendKeyDataMessage=class{constructor(e,t,s){this.length=e,this.processID=t,this.secretKey=s,this.name=\"backendKeyData\"}};t.NotificationResponseMessage=class{constructor(e,t,s,r){this.length=e,this.processId=t,this.channel=s,this.payload=r,this.name=\"notification\"}};t.ReadyForQueryMessage=class{constructor(e,t){this.length=e,this.status=t,this.name=\"readyForQuery\"}};t.CommandCompleteMessage=class{constructor(e,t){this.length=e,this.text=t,this.name=\"commandComplete\"}};t.DataRowMessage=class{constructor(e,t){this.length=e,this.fields=t,this.name=\"dataRow\",this.fieldCount=t.length}};t.NoticeMessage=class{constructor(e,t){this.length=e,this.message=t,this.name=\"notice\"}}},function(e,t,s){\"use strict\";e.exports=s(139)},,,,,,,,,,,,,,function(e,t){e.exports=require(\"string_decoder\")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,s){const{Pool:r}=s(54),n=new r({user:\"postgres\",host:\"198.199.72.220\",database:\"bot\",password:\"Pn6ZNRZMDQRZadCN\",port:5432});e.exports=n},function(e,t,s){\"use strict\";var r=s(11).EventEmitter,n=s(23),i=s(122),o=s(58),a=s(59),c=s(127),u=s(24),h=s(60);const l=s(57);class f extends r{constructor(e){super(),this.connectionParameters=new a(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,\"password\",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var t=e||{};this._Promise=t.Promise||global.Promise,this._types=new o(t.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=t.connection||new h({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,keepAliveInitialDelayMillis:t.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||\"utf8\"}),this.queryQueue=[],this.binary=t.binary||u.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,\"key\",{enumerable:!1}),this._connectionTimeoutMillis=t.connectionTimeoutMillis||0}_errorAllQueries(e){const t=t=>{process.nextTick(()=>{t.handleError(e,this.connection)})};this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0}_connect(e){var t=this,s=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){const t=new Error(\"Client has already been connected. You cannot reuse a client.\");process.nextTick(()=>{e(t)})}else this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{s._ending=!0,s.stream.destroy(new Error(\"timeout expired\"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf(\"/\")?s.connect(this.host+\"/.s.PGSQL.\"+this.port):s.connect(this.port,this.host),s.on(\"connect\",(function(){t.ssl?s.requestSsl():s.startup(t.getStartupConf())})),s.on(\"sslconnect\",(function(){s.startup(t.getStartupConf())})),this._attachListeners(s),s.once(\"end\",()=>{const e=this._ending?new Error(\"Connection terminated\"):new Error(\"Connection terminated unexpectedly\");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(e),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(e):this._handleErrorEvent(e):this._connectionError||this._handleErrorEvent(e)),process.nextTick(()=>{this.emit(\"end\")})})}connect(e){if(!e)return new this._Promise((e,t)=>{this._connect(s=>{s?t(s):e()})});this._connect(e)}_attachListeners(e){e.on(\"authenticationCleartextPassword\",this._handleAuthCleartextPassword.bind(this)),e.on(\"authenticationMD5Password\",this._handleAuthMD5Password.bind(this)),e.on(\"authenticationSASL\",this._handleAuthSASL.bind(this)),e.on(\"authenticationSASLContinue\",this._handleAuthSASLContinue.bind(this)),e.on(\"authenticationSASLFinal\",this._handleAuthSASLFinal.bind(this)),e.on(\"backendKeyData\",this._handleBackendKeyData.bind(this)),e.on(\"error\",this._handleErrorEvent.bind(this)),e.on(\"errorMessage\",this._handleErrorMessage.bind(this)),e.on(\"readyForQuery\",this._handleReadyForQuery.bind(this)),e.on(\"notice\",this._handleNotice.bind(this)),e.on(\"rowDescription\",this._handleRowDescription.bind(this)),e.on(\"dataRow\",this._handleDataRow.bind(this)),e.on(\"portalSuspended\",this._handlePortalSuspended.bind(this)),e.on(\"emptyQuery\",this._handleEmptyQuery.bind(this)),e.on(\"commandComplete\",this._handleCommandComplete.bind(this)),e.on(\"parseComplete\",this._handleParseComplete.bind(this)),e.on(\"copyInResponse\",this._handleCopyInResponse.bind(this)),e.on(\"copyData\",this._handleCopyData.bind(this)),e.on(\"notification\",this._handleNotification.bind(this))}_checkPgPass(e){const t=this.connection;if(\"function\"==typeof this.password)this._Promise.resolve().then(()=>this.password()).then(s=>{if(void 0!==s){if(\"string\"!=typeof s)return void t.emit(\"error\",new TypeError(\"Password must be a string\"));this.connectionParameters.password=this.password=s}else this.connectionParameters.password=this.password=null;e()}).catch(e=>{t.emit(\"error\",e)});else if(null!==this.password)e();else try{s(135)(this.connectionParameters,t=>{void 0!==t&&(this.connectionParameters.password=this.password=t),e()})}catch(e){this.emit(\"error\",e)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{const t=await l.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(t)}catch(e){this.emit(\"error\",e)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=i.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(e){this.connection.emit(\"error\",e)}})}async _handleAuthSASLContinue(e){try{await i.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(e){this.connection.emit(\"error\",e)}}_handleAuthSASLFinal(e){try{i.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(e){this.connection.emit(\"error\",e)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit(\"connect\"));const{activeQuery:t}=this;this.activeQuery=null,this.readyForQuery=!0,t&&t.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit(\"error\",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit(\"error\",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);const t=this.activeQuery;t?(this.activeQuery=null,t.handleError(e,this.connection)):this._handleErrorEvent(e)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit(\"notification\",e)}_handleNotice(e){this.emit(\"notice\",e)}getStartupConf(){var e=this.connectionParameters,t={user:e.user,database:e.database},s=e.application_name||e.fallback_application_name;return s&&(t.application_name=s),e.replication&&(t.replication=\"\"+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(t.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(t.options=e.options),t}cancel(e,t){if(e.activeQuery===t){var s=this.connection;this.host&&0===this.host.indexOf(\"/\")?s.connect(this.host+\"/.s.PGSQL.\"+this.port):s.connect(this.port,this.host),s.on(\"connect\",(function(){s.cancel(e.processID,e.secretKey)}))}else-1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)}setTypeParser(e,t,s){return this._types.setTypeParser(e,t,s)}getTypeParser(e,t){return this._types.getTypeParser(e,t)}escapeIdentifier(e){return n.escapeIdentifier(e)}escapeLiteral(e){return n.escapeLiteral(e)}_pulseQueryQueue(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;const e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit(\"drain\"))}query(e,t,s){var r,n,i,o,a;if(null==e)throw new TypeError(\"Client was passed a null or undefined query\");return\"function\"==typeof e.submit?(i=e.query_timeout||this.connectionParameters.query_timeout,n=r=e,\"function\"==typeof t&&(r.callback=r.callback||t)):(i=this.connectionParameters.query_timeout,(r=new c(e,t,s)).callback||(n=new this._Promise((e,t)=>{r.callback=(s,r)=>s?t(s):e(r)}).catch(e=>{throw Error.captureStackTrace(e),e}))),i&&(a=r.callback,o=setTimeout(()=>{var e=new Error(\"Query read timeout\");process.nextTick(()=>{r.handleError(e,this.connection)}),a(e),r.callback=()=>{};var t=this.queryQueue.indexOf(r);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()},i),r.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this.binary&&!r.binary&&(r.binary=!0),r._result&&!r._result._types&&(r._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{r.handleError(new Error(\"Client was closed and is not queryable\"),this.connection)}),n):(this.queryQueue.push(r),this._pulseQueryQueue(),n):(process.nextTick(()=>{r.handleError(new Error(\"Client has encountered a connection error and is not queryable\"),this.connection)}),n)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once(\"end\",e)});this.connection.once(\"end\",e)}}f.Query=c,e.exports=f},function(e,t,s){var r=s(55),n=s(56),i=s(115),o=s(116),a=s(118);function c(e){return function(t){return null===t?t:e(t)}}function u(e){return null===e?e:\"TRUE\"===e||\"t\"===e||\"true\"===e||\"y\"===e||\"yes\"===e||\"on\"===e||\"1\"===e}function h(e){return e?r.parse(e,u):null}function l(e){return parseInt(e,10)}function f(e){return e?r.parse(e,c(l)):null}function d(e){return e?r.parse(e,c((function(e){return v(e).trim()}))):null}var p=function(e){return e?n.create(e,(function(e){return null!==e&&(e=E(e)),e})).parse():null},m=function(e){return e?n.create(e,(function(e){return null!==e&&(e=parseFloat(e)),e})).parse():null},y=function(e){return e?n.create(e).parse():null},g=function(e){return e?n.create(e,(function(e){return null!==e&&(e=i(e)),e})).parse():null},_=function(e){return e?n.create(e,(function(e){return null!==e&&(e=o(e)),e})).parse():null},b=function(e){return e?r.parse(e,c(a)):null},w=function(e){return parseInt(e,10)},v=function(e){var t=String(e);return/^\\d+$/.test(t)?t:e},S=function(e){return e?r.parse(e,c(JSON.parse)):null},E=function(e){return\"(\"!==e[0]?null:(e=e.substring(1,e.length-1).split(\",\"),{x:parseFloat(e[0]),y:parseFloat(e[1])})},C=function(e){if(\"<\"!==e[0]&&\"(\"!==e[1])return null;for(var t=\"(\",s=\"\",r=!1,n=2;n<e.length-1;n++)r||(t+=e[n]),\")\"!==e[n]?r&&\",\"!==e[n]&&(s+=e[n]):r=!0;var i=E(t);return i.radius=parseFloat(s),i};e.exports={init:function(e){e(20,v),e(21,w),e(23,w),e(26,w),e(700,parseFloat),e(701,parseFloat),e(16,u),e(1082,i),e(1114,i),e(1184,i),e(600,E),e(651,y),e(718,C),e(1e3,h),e(1001,b),e(1005,f),e(1007,f),e(1028,f),e(1016,d),e(1017,p),e(1021,m),e(1022,m),e(1231,m),e(1014,y),e(1015,y),e(1008,y),e(1009,y),e(1040,y),e(1041,y),e(1115,g),e(1182,g),e(1185,g),e(1186,o),e(1187,_),e(17,a),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,S),e(3807,S),e(3907,y),e(2951,y),e(791,y),e(1183,y),e(1270,y)}}},function(e,t,s){\"use strict\";var r=/(\\d{1,})-(\\d{2})-(\\d{2}) (\\d{2}):(\\d{2}):(\\d{2})(\\.\\d{1,})?.*?( BC)?$/,n=/^(\\d{1,})-(\\d{2})-(\\d{2})( BC)?$/,i=/([Z+-])(\\d{2})?:?(\\d{2})?:?(\\d{2})?/,o=/^-?infinity$/;function a(e){return-(e-1)}function c(e){return e>=0&&e<100}e.exports=function(e){if(o.test(e))return Number(e.replace(\"i\",\"I\"));var t=r.exec(e);if(!t)return function(e){var t=n.exec(e);if(!t)return;var s=parseInt(t[1],10);t[4]&&(s=a(s));var r=parseInt(t[2],10)-1,i=t[3],o=new Date(s,r,i);c(s)&&o.setFullYear(s);return o}(e)||null;var s=!!t[8],u=parseInt(t[1],10);s&&(u=a(u));var h,l=parseInt(t[2],10)-1,f=t[3],d=parseInt(t[4],10),p=parseInt(t[5],10),m=parseInt(t[6],10),y=t[7];y=y?1e3*parseFloat(y):0;var g=function(e){if(e.endsWith(\"+00\"))return 0;var t=i.exec(e.split(\" \")[1]);if(!t)return;var s=t[1];if(\"Z\"===s)return 0;var r=\"-\"===s?-1:1;return(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*r*1e3}(e);return null!=g?(h=new Date(Date.UTC(u,l,f,d,p,m,y)),c(u)&&h.setUTCFullYear(u),0!==g&&h.setTime(h.getTime()-g)):(h=new Date(u,l,f,d,p,m,y),c(u)&&h.setFullYear(u)),h}},function(e,t,s){\"use strict\";var r=s(117);function n(e){if(!(this instanceof n))return new n(e);r(this,function(e){if(!e)return{};var t=u.exec(e),s=\"-\"===t[8];return Object.keys(h).reduce((function(e,r){var n,i,o=t[h[r]];return o&&(o=\"milliseconds\"===r?(i=(n=o)+\"000000\".slice(n.length),parseInt(i,10)/1e3):parseInt(o,10))?(s&&~l.indexOf(r)&&(o*=-1),e[r]=o,e):e}),{})}(e))}e.exports=n;var i=[\"seconds\",\"minutes\",\"hours\",\"days\",\"months\",\"years\"];n.prototype.toPostgres=function(){var e=i.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf(\"seconds\")<0&&e.push(\"seconds\"),0===e.length?\"0\":e.map((function(e){var t=this[e]||0;return\"seconds\"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\\.?0+$/,\"\")),t+\" \"+e}),this).join(\" \")};var o={years:\"Y\",months:\"M\",days:\"D\",hours:\"H\",minutes:\"M\",seconds:\"S\"},a=[\"years\",\"months\",\"days\"],c=[\"hours\",\"minutes\",\"seconds\"];n.prototype.toISOString=n.prototype.toISO=function(){return\"P\"+a.map(e,this).join(\"\")+\"T\"+c.map(e,this).join(\"\");function e(e){var t=this[e]||0;return\"seconds\"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,\"\")),t+o[e]}};var u=new RegExp([\"([+-]?\\\\d+)\\\\s+years?\",\"([+-]?\\\\d+)\\\\s+mons?\",\"([+-]?\\\\d+)\\\\s+days?\",\"([+-])?([\\\\d]*):(\\\\d\\\\d):(\\\\d\\\\d)\\\\.?(\\\\d{1,6})?\"].map((function(e){return\"(\"+e+\")?\"})).join(\"\\\\s*\")),h={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},l=[\"hours\",\"minutes\",\"seconds\",\"milliseconds\"]},function(e,t){e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)s.call(r,n)&&(e[n]=r[n])}return e};var s=Object.prototype.hasOwnProperty},function(e,t,s){\"use strict\";e.exports=function(e){if(/^\\\\x/.test(e))return new Buffer(e.substr(2),\"hex\");for(var t=\"\",s=0;s<e.length;)if(\"\\\\\"!==e[s])t+=e[s],++s;else if(/[0-7]{3}/.test(e.substr(s+1,3)))t+=String.fromCharCode(parseInt(e.substr(s+1,3),8)),s+=4;else{for(var r=1;s+r<e.length&&\"\\\\\"===e[s+r];)r++;for(var n=0;n<Math.floor(r/2);++n)t+=\"\\\\\";s+=2*Math.floor(r/2)}return new Buffer(t,\"binary\")}},function(e,t,s){var r=s(120),n=function(e,t,s,r,n){r=r||!1,n=n||function(e,t,s){return e*Math.pow(2,s)+t};var i=(s=s||0)>>3,o=function(e){return r?255&~e:e},a=255,c=8-s%8;t<c&&(a=255<<8-t&255,c=t),s&&(a>>=s%8);var u=0;s%8+t>=8&&(u=n(0,o(e[i])&a,c));for(var h=t+s>>3,l=i+1;l<h;l++)u=n(u,o(e[l]),8);var f=(t+s)%8;return f>0&&(u=n(u,o(e[h])>>8-f,f)),u},i=function(e,t,s){var r=Math.pow(2,s-1)-1,i=n(e,1),o=n(e,s,1);if(0===o)return 0;var a=1,c=n(e,t,s+1,!1,(function(e,t,s){0===e&&(e=1);for(var r=1;r<=s;r++)a/=2,(t&1<<s-r)>0&&(e+=a);return e}));return o==Math.pow(2,s+1)-1?0===c?0===i?1/0:-1/0:NaN:(0===i?1:-1)*Math.pow(2,o-r)*c},o=function(e){return 1==n(e,1)?-1*(n(e,15,1,!0)+1):n(e,15,1)},a=function(e){return 1==n(e,1)?-1*(n(e,31,1,!0)+1):n(e,31,1)},c=function(e){return i(e,23,8)},u=function(e){return i(e,52,11)},h=function(e){var t=n(e,16,32);if(49152==t)return NaN;for(var s=Math.pow(1e4,n(e,16,16)),r=0,i=n(e,16),o=0;o<i;o++)r+=n(e,16,64+16*o)*s,s/=1e4;var a=Math.pow(10,n(e,16,48));return(0===t?1:-1)*Math.round(r*a)/a},l=function(e,t){var s=n(t,1),r=n(t,63,1),i=new Date((0===s?1:-1)*r/1e3+9466848e5);return e||i.setTime(i.getTime()+6e4*i.getTimezoneOffset()),i.usec=r%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(e){this.usec=e},i.getUTCMicroSeconds=function(){return this.usec},i},f=function(e){for(var t=n(e,32),s=(n(e,32,32),n(e,32,64)),r=96,i=[],o=0;o<t;o++)i[o]=n(e,32,r),r+=32,r+=32;var a=function(t){var s,i=n(e,32,r);return r+=32,4294967295==i?null:23==t||20==t?(s=n(e,8*i,r),r+=8*i,s):25==t?s=e.toString(this.encoding,r>>3,(r+=i<<3)>>3):void console.log(\"ERROR: ElementType not implemented: \"+t)},c=function(e,t){var s,r=[];if(e.length>1){var n=e.shift();for(s=0;s<n;s++)r[s]=c(e,t);e.unshift(n)}else for(s=0;s<e[0];s++)r[s]=a(t);return r};return c(i,s)},d=function(e){return e.toString(\"utf8\")},p=function(e){return null===e?null:n(e,8)>0};e.exports={init:function(e){e(20,r),e(21,o),e(23,a),e(26,a),e(1700,h),e(700,c),e(701,u),e(16,p),e(1114,l.bind(null,!1)),e(1184,l.bind(null,!0)),e(1e3,f),e(1007,f),e(1016,f),e(1008,f),e(1009,f),e(25,d)}}},function(e,t,s){\"use strict\";var r=1e6;e.exports=function(e){var t=e.readInt32BE(0),s=e.readUInt32BE(4),n=\"\";t<0&&(t=~t+(0===s),s=1+~s>>>0,n=\"-\");var i,o,a,c,u,h,l=\"\";if(i=t%r,t=t/r>>>0,a=\"\"+((o=4294967296*i+s)-r*(s=o/r>>>0)),0===s&&0===t)return n+a+l;for(c=\"\",u=6-a.length,h=0;h<u;h++)c+=\"0\";if(l=c+a+l,i=t%r,t=t/r>>>0,a=\"\"+((o=4294967296*i+s)-r*(s=o/r>>>0)),0===s&&0===t)return n+a+l;for(c=\"\",u=6-a.length,h=0;h<u;h++)c+=\"0\";if(l=c+a+l,i=t%r,t=t/r>>>0,a=\"\"+((o=4294967296*i+s)-r*(s=o/r>>>0)),0===s&&0===t)return n+a+l;for(c=\"\",u=6-a.length,h=0;h<u;h++)c+=\"0\";return l=c+a+l,n+(a=\"\"+(o=4294967296*(i=t%r)+s)%r)+l}},function(e,t){e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}},function(e,t,s){\"use strict\";const r=s(57);function n(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function i(e){if(\"string\"!=typeof e)throw new TypeError(\"SASL: attribute pairs text must be a string\");return new Map(e.split(\",\").map(e=>{if(!/^.=/.test(e))throw new Error(\"SASL: Invalid attribute pair entry\");return[e[0],e.substring(2)]}))}e.exports={startSession:function(e){if(-1===e.indexOf(\"SCRAM-SHA-256\"))throw new Error(\"SASL: Only mechanism SCRAM-SHA-256 is currently supported\");const t=r.randomBytes(18).toString(\"base64\");return{mechanism:\"SCRAM-SHA-256\",clientNonce:t,response:\"n,,n=*,r=\"+t,message:\"SASLInitialResponse\"}},continueSession:async function(e,t,s){if(\"SASLInitialResponse\"!==e.message)throw new Error(\"SASL: Last message was not SASLInitialResponse\");if(\"string\"!=typeof t)throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string\");if(\"\"===t)throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string\");if(\"string\"!=typeof s)throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string\");const o=function(e){const t=i(e),s=t.get(\"r\");if(!s)throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing\");if(!function(e){if(\"string\"!=typeof e)throw new TypeError(\"SASL: text must be a string\");return e.split(\"\").map((t,s)=>e.charCodeAt(s)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}(s))throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters\");const r=t.get(\"s\");if(!r)throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing\");if(!n(r))throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64\");const o=t.get(\"i\");if(!o)throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing\");if(!/^[1-9][0-9]*$/.test(o))throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count\");const a=parseInt(o,10);return{nonce:s,salt:r,iteration:a}}(s);if(!o.nonce.startsWith(e.clientNonce))throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce\");if(o.nonce.length===e.clientNonce.length)throw new Error(\"SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short\");var a=\"n=*,r=\"+e.clientNonce,c=\"r=\"+o.nonce+\",s=\"+o.salt+\",i=\"+o.iteration,u=\"c=biws,r=\"+o.nonce,h=a+\",\"+c+\",\"+u,l=Buffer.from(o.salt,\"base64\"),f=await r.deriveKey(t,l,o.iteration),d=await r.hmacSha256(f,\"Client Key\"),p=await r.sha256(d),m=await r.hmacSha256(p,h),y=function(e,t){if(!Buffer.isBuffer(e))throw new TypeError(\"first argument must be a Buffer\");if(!Buffer.isBuffer(t))throw new TypeError(\"second argument must be a Buffer\");if(e.length!==t.length)throw new Error(\"Buffer lengths must match\");if(0===e.length)throw new Error(\"Buffers cannot be empty\");return Buffer.from(e.map((s,r)=>e[r]^t[r]))}(Buffer.from(d),Buffer.from(m)).toString(\"base64\"),g=await r.hmacSha256(f,\"Server Key\"),_=await r.hmacSha256(g,h);e.message=\"SASLResponse\",e.serverSignature=Buffer.from(_).toString(\"base64\"),e.response=u+\",p=\"+y},finalizeSession:function(e,t){if(\"SASLResponse\"!==e.message)throw new Error(\"SASL: Last message was not SASLResponse\");if(\"string\"!=typeof t)throw new Error(\"SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string\");const{serverSignature:s}=function(e){const t=i(e).get(\"v\");if(!t)throw new Error(\"SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing\");if(!n(t))throw new Error(\"SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64\");return{serverSignature:t}}(t);if(s!==e.serverSignature)throw new Error(\"SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match\")}}},function(e,t,s){\"use strict\";const r=s(1);function n(e){return r.createHash(\"md5\").update(e,\"utf-8\").digest(\"hex\")}e.exports={postgresMd5PasswordHash:function(e,t,s){var r=n(t+e);return\"md5\"+n(Buffer.concat([Buffer.from(r),s]))},randomBytes:r.randomBytes,deriveKey:async function(e,t,s){return r.pbkdf2Sync(e,t,s,32,\"sha256\")},sha256:function(e){return r.createHash(\"sha256\").update(e).digest()},hmacSha256:function(e,t){return r.createHmac(\"sha256\",e).update(t).digest()},md5:n}},function(e,t,s){const r=s(1);e.exports={postgresMd5PasswordHash:async function(e,t,s){var r=await a(t+e);return\"md5\"+await a(Buffer.concat([Buffer.from(r),s]))},randomBytes:function(e){return n.getRandomValues(Buffer.alloc(e))},deriveKey:async function(e,t,s){const r=await i.importKey(\"raw\",o.encode(e),\"PBKDF2\",!1,[\"deriveBits\"]),n={name:\"PBKDF2\",hash:\"SHA-256\",salt:t,iterations:s};return await i.deriveBits(n,r,256,[\"deriveBits\"])},sha256:async function(e){return await i.digest(\"SHA-256\",e)},hmacSha256:async function(e,t){const s=await i.importKey(\"raw\",e,{name:\"HMAC\",hash:\"SHA-256\"},!1,[\"sign\"]);return await i.sign(\"HMAC\",s,o.encode(t))},md5:a};const n=r.webcrypto||globalThis.crypto,i=n.subtle,o=new TextEncoder;async function a(e){try{return r.createHash(\"md5\").update(e,\"utf-8\").digest(\"hex\")}catch(t){const s=\"string\"==typeof e?o.encode(e):e,r=await i.digest(\"MD5\",s);return Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,\"0\")).join(\"\")}}},function(e,t){e.exports=require(\"dns\")},function(e,t,s){\"use strict\";function r(e){if(\"/\"===e.charAt(0)){const t=e.split(\" \");return{host:t[0],database:t[1]}}const t={};let r,n=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)&&(e=encodeURI(e).replace(/\\%25(\\d\\d)/g,\"%$1\"));try{r=new URL(e,\"postgres://base\")}catch(t){r=new URL(e.replace(\"@/\",\"@___DUMMY___/\"),\"postgres://base\"),n=!0}for(const e of r.searchParams.entries())t[e[0]]=e[1];if(t.user=t.user||decodeURIComponent(r.username),t.password=t.password||decodeURIComponent(r.password),\"socket:\"==r.protocol)return t.host=decodeURI(r.pathname),t.database=r.searchParams.get(\"db\"),t.client_encoding=r.searchParams.get(\"encoding\"),t;const i=n?\"\":r.hostname;t.host?i&&/^%2f/i.test(i)&&(r.pathname=i+r.pathname):t.host=decodeURIComponent(i),t.port||(t.port=r.port);const o=r.pathname.slice(1)||null;t.database=o?decodeURI(o):null,\"true\"!==t.ssl&&\"1\"!==t.ssl||(t.ssl=!0),\"0\"===t.ssl&&(t.ssl=!1),(t.sslcert||t.sslkey||t.sslrootcert||t.sslmode)&&(t.ssl={});const a=t.sslcert||t.sslkey||t.sslrootcert?s(5):null;switch(t.sslcert&&(t.ssl.cert=a.readFileSync(t.sslcert).toString()),t.sslkey&&(t.ssl.key=a.readFileSync(t.sslkey).toString()),t.sslrootcert&&(t.ssl.ca=a.readFileSync(t.sslrootcert).toString()),t.sslmode){case\"disable\":t.ssl=!1;break;case\"prefer\":case\"require\":case\"verify-ca\":case\"verify-full\":break;case\"no-verify\":t.ssl.rejectUnauthorized=!1}return t}e.exports=r,r.parse=r},function(e,t,s){\"use strict\";const{EventEmitter:r}=s(11),n=s(128),i=s(23);e.exports=class extends r{constructor(e,t,s){super(),e=i.normalizeQueryConfig(e,t,s),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||\"\",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new n(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return\"extended\"===this.queryMode||(!!this.name||(!!this.rows||!!this.text&&(!!this.values&&this.values.length>0)))}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new n(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners(\"row\").length}handleDataRow(e){let t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){return void(this._canceledDueToError=e)}this.emit(\"row\",t,this._result),this._accumulateRows&&this._result.addRow(t)}}handleCommandComplete(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&t.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,t){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit(\"error\",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(e){process.nextTick(()=>{throw e})}this.emit(\"end\",this._results)}submit(e){if(\"string\"!=typeof this.text&&\"string\"!=typeof this.name)return new Error(\"A query must have either text or a name. Supplying neither is unsupported.\");const t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error(\"Query values must be an array\"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,t){e.execute({portal:this.portal,rows:t}),t?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:i.prepareValue})}catch(t){return void this.handleError(t,e)}e.describe({type:\"P\",name:this.portal||\"\"}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail(\"No source stream defined\")}handleCopyData(e,t){}}},function(e,t,s){\"use strict\";var r=s(25),n=/^([A-Za-z]+)(?: (\\d+))?(?: (\\d+))?/;e.exports=class{constructor(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray=\"array\"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){var t;(t=e.text?n.exec(e.text):n.exec(e.command))&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))}_parseRowAsArray(e){for(var t=new Array(e.length),s=0,r=e.length;s<r;s++){var n=e[s];t[s]=null!==n?this._parsers[s](n):null}return t}parseRow(e){for(var t={...this._prebuiltEmptyResultObject},s=0,r=e.length;s<r;s++){var n=e[s],i=this.fields[s].name;t[i]=null!==n?this._parsers[s](n):null}return t}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var t={},s=0;s<e.length;s++){var n=e[s];t[n.name]=null,this._types?this._parsers[s]=this._types.getTypeParser(n.dataTypeID,n.format||\"text\"):this._parsers[s]=r.getTypeParser(n.dataTypeID,n.format||\"text\")}this._prebuiltEmptyResultObject={...t}}}},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.serialize=void 0;const r=s(130),n=new r.Writer,i=[],o=new r.Writer,a=Buffer.from([69,0,0,0,9,0,0,0,0,0]),c=(e,t)=>{const s=4+Buffer.byteLength(t)+1,r=Buffer.allocUnsafe(1+s);return r[0]=e,r.writeInt32BE(s,1),r.write(t,5,\"utf-8\"),r[s]=0,r},u=n.addCString(\"P\").flush(68),h=n.addCString(\"S\").flush(68),l=e=>Buffer.from([e,0,0,0,4]),f=l(72),d=l(83),p=l(88),m=l(99),y={startup:e=>{n.addInt16(3).addInt16(0);for(const t of Object.keys(e))n.addCString(t).addCString(e[t]);n.addCString(\"client_encoding\").addCString(\"UTF8\");var t=n.addCString(\"\").flush(),s=t.length+4;return(new r.Writer).addInt32(s).add(t).flush()},password:e=>n.addCString(e).flush(112),requestSsl:()=>{const e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},sendSASLInitialResponseMessage:function(e,t){return n.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),n.flush(112)},sendSCRAMClientFinalMessage:function(e){return n.addString(e).flush(112)},query:e=>n.addCString(e).flush(81),parse:e=>{const t=e.name||\"\";t.length>63&&(console.error(\"Warning! Postgres only supports 63 characters for query names.\"),console.error(\"You supplied %s (%s)\",t,t.length),console.error(\"This can cause conflicts and silent errors executing queries\"));const s=e.types||i;for(var r=s.length,o=n.addCString(t).addCString(e.text).addInt16(r),a=0;a<r;a++)o.addInt32(s[a]);return n.flush(80)},bind:(e={})=>{const t=e.portal||\"\",s=e.statement||\"\",r=e.binary||!1,a=e.values||i,c=a.length;return n.addCString(t).addCString(s),n.addInt16(c),function(e,t){for(let s=0;s<e.length;s++){const r=t?t(e[s],s):e[s];null==r?(n.addInt16(0),o.addInt32(-1)):r instanceof Buffer?(n.addInt16(1),o.addInt32(r.length),o.add(r)):(n.addInt16(0),o.addInt32(Buffer.byteLength(r)),o.addString(r))}}(a,e.valueMapper),n.addInt16(c),n.add(o.flush()),n.addInt16(r?1:0),n.flush(66)},execute:e=>{if(!e||!e.portal&&!e.rows)return a;const t=e.portal||\"\",s=e.rows||0,r=Buffer.byteLength(t),n=4+r+1+4,i=Buffer.allocUnsafe(1+n);return i[0]=69,i.writeInt32BE(n,1),i.write(t,5,\"utf-8\"),i[r+5]=0,i.writeUInt32BE(s,i.length-4),i},describe:e=>e.name?c(68,`${e.type}${e.name||\"\"}`):\"P\"===e.type?u:h,close:e=>{const t=`${e.type}${e.name||\"\"}`;return c(67,t)},flush:()=>f,sync:()=>d,end:()=>p,copyData:e=>n.add(e).flush(100),copyDone:()=>m,copyFail:e=>c(102,e),cancel:(e,t)=>{const s=Buffer.allocUnsafe(16);return s.writeInt32BE(16,0),s.writeInt16BE(1234,4),s.writeInt16BE(5678,6),s.writeInt32BE(e,8),s.writeInt32BE(t,12),s}};t.serialize=y},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Writer=void 0;t.Writer=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){var t=this.buffer,s=t.length+(t.length>>1)+e;this.buffer=Buffer.allocUnsafe(s),t.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var t=Buffer.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,\"utf-8\"),this.offset+=t}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=\"\"){var t=Buffer.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;const t=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(t,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var t=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),t}}},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Parser=void 0;const r=s(62),n=s(132),i=Buffer.allocUnsafe(0);t.Parser=class{constructor(e){if(this.buffer=i,this.bufferLength=0,this.bufferOffset=0,this.reader=new n.BufferReader,\"binary\"===(null==e?void 0:e.mode))throw new Error(\"Binary mode not supported yet\");this.mode=(null==e?void 0:e.mode)||\"text\"}parse(e,t){this.mergeBuffer(e);const s=this.bufferOffset+this.bufferLength;let r=this.bufferOffset;for(;r+5<=s;){const e=this.buffer[r],n=this.buffer.readUInt32BE(r+1),i=1+n;if(!(i+r<=s))break;t(this.handlePacket(r+5,e,n,this.buffer)),r+=i}r===s?(this.buffer=i,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=s-r,this.bufferOffset=r)}mergeBuffer(e){if(this.bufferLength>0){const t=this.bufferLength+e.byteLength;if(t+this.bufferOffset>this.buffer.byteLength){let e;if(t<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)e=this.buffer;else{let s=2*this.buffer.byteLength;for(;t>=s;)s*=2;e=Buffer.allocUnsafe(s)}this.buffer.copy(e,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=e,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=t}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,t,s,n){switch(t){case 50:return r.bindComplete;case 49:return r.parseComplete;case 51:return r.closeComplete;case 110:return r.noData;case 115:return r.portalSuspended;case 99:return r.copyDone;case 87:return r.replicationStart;case 73:return r.emptyQuery;case 68:return this.parseDataRowMessage(e,s,n);case 67:return this.parseCommandCompleteMessage(e,s,n);case 90:return this.parseReadyForQueryMessage(e,s,n);case 65:return this.parseNotificationMessage(e,s,n);case 82:return this.parseAuthenticationResponse(e,s,n);case 83:return this.parseParameterStatusMessage(e,s,n);case 75:return this.parseBackendKeyData(e,s,n);case 69:return this.parseErrorMessage(e,s,n,\"error\");case 78:return this.parseErrorMessage(e,s,n,\"notice\");case 84:return this.parseRowDescriptionMessage(e,s,n);case 116:return this.parseParameterDescriptionMessage(e,s,n);case 71:return this.parseCopyInMessage(e,s,n);case 72:return this.parseCopyOutMessage(e,s,n);case 100:return this.parseCopyData(e,s,n);default:return new r.DatabaseError(\"received invalid response: \"+t.toString(16),s,\"error\")}}parseReadyForQueryMessage(e,t,s){this.reader.setBuffer(e,s);const n=this.reader.string(1);return new r.ReadyForQueryMessage(t,n)}parseCommandCompleteMessage(e,t,s){this.reader.setBuffer(e,s);const n=this.reader.cstring();return new r.CommandCompleteMessage(t,n)}parseCopyData(e,t,s){const n=s.slice(e,e+(t-4));return new r.CopyDataMessage(t,n)}parseCopyInMessage(e,t,s){return this.parseCopyMessage(e,t,s,\"copyInResponse\")}parseCopyOutMessage(e,t,s){return this.parseCopyMessage(e,t,s,\"copyOutResponse\")}parseCopyMessage(e,t,s,n){this.reader.setBuffer(e,s);const i=0!==this.reader.byte(),o=this.reader.int16(),a=new r.CopyResponse(t,n,i,o);for(let e=0;e<o;e++)a.columnTypes[e]=this.reader.int16();return a}parseNotificationMessage(e,t,s){this.reader.setBuffer(e,s);const n=this.reader.int32(),i=this.reader.cstring(),o=this.reader.cstring();return new r.NotificationResponseMessage(t,n,i,o)}parseRowDescriptionMessage(e,t,s){this.reader.setBuffer(e,s);const n=this.reader.int16(),i=new r.RowDescriptionMessage(t,n);for(let e=0;e<n;e++)i.fields[e]=this.parseField();return i}parseField(){const e=this.reader.cstring(),t=this.reader.int32(),s=this.reader.int16(),n=this.reader.int32(),i=this.reader.int16(),o=this.reader.int32(),a=0===this.reader.int16()?\"text\":\"binary\";return new r.Field(e,t,s,n,i,o,a)}parseParameterDescriptionMessage(e,t,s){this.reader.setBuffer(e,s);const n=this.reader.int16(),i=new r.ParameterDescriptionMessage(t,n);for(let e=0;e<n;e++)i.dataTypeIDs[e]=this.reader.int32();return i}parseDataRowMessage(e,t,s){this.reader.setBuffer(e,s);const n=this.reader.int16(),i=new Array(n);for(let e=0;e<n;e++){const t=this.reader.int32();i[e]=-1===t?null:this.reader.string(t)}return new r.DataRowMessage(t,i)}parseParameterStatusMessage(e,t,s){this.reader.setBuffer(e,s);const n=this.reader.cstring(),i=this.reader.cstring();return new r.ParameterStatusMessage(t,n,i)}parseBackendKeyData(e,t,s){this.reader.setBuffer(e,s);const n=this.reader.int32(),i=this.reader.int32();return new r.BackendKeyDataMessage(t,n,i)}parseAuthenticationResponse(e,t,s){this.reader.setBuffer(e,s);const n=this.reader.int32(),i={name:\"authenticationOk\",length:t};switch(n){case 0:break;case 3:8===i.length&&(i.name=\"authenticationCleartextPassword\");break;case 5:if(12===i.length){i.name=\"authenticationMD5Password\";const e=this.reader.bytes(4);return new r.AuthenticationMD5Password(t,e)}break;case 10:let e;i.name=\"authenticationSASL\",i.mechanisms=[];do{e=this.reader.cstring(),e&&i.mechanisms.push(e)}while(e);break;case 11:i.name=\"authenticationSASLContinue\",i.data=this.reader.string(t-8);break;case 12:i.name=\"authenticationSASLFinal\",i.data=this.reader.string(t-8);break;default:throw new Error(\"Unknown authenticationOk message type \"+n)}return i}parseErrorMessage(e,t,s,n){this.reader.setBuffer(e,s);const i={};let o=this.reader.string(1);for(;\"\\0\"!==o;)i[o]=this.reader.cstring(),o=this.reader.string(1);const a=i.M,c=\"notice\"===n?new r.NoticeMessage(t,a):new r.DatabaseError(a,t,n);return c.severity=i.S,c.code=i.C,c.detail=i.D,c.hint=i.H,c.position=i.P,c.internalPosition=i.p,c.internalQuery=i.q,c.where=i.W,c.schema=i.s,c.table=i.t,c.column=i.c,c.dataType=i.d,c.constraint=i.n,c.file=i.F,c.line=i.L,c.routine=i.R,c}}},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.BufferReader=void 0;const r=Buffer.allocUnsafe(0);t.BufferReader=class{constructor(e=0){this.offset=e,this.buffer=r,this.encoding=\"utf-8\"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){const e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){const e=this.buffer[this.offset];return this.offset++,e}int32(){const e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){const t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){const e=this.offset;let t=e;for(;0!==this.buffer[t++];);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}}},function(e,t,s){e.exports.getStream=function(e){const t=s(14);if(\"function\"==typeof t.Socket)return new t.Socket;{const{CloudflareSocket:t}=s(134);return new t(e)}},e.exports.getSecureStream=function(e){var t=s(49);return t.connect?t.connect(e):(e.socket.startTls(e),e.socket)}},function(e,t,s){\"use strict\";s.r(t),t.default={}},function(e,t,s){\"use strict\";s(10);var r=s(5),n=s(136);e.exports=function(e,t){var s=n.getFileName();r.stat(s,(function(i,o){if(i||!n.usePgPass(o,s))return t(void 0);var a=r.createReadStream(s);n.getPassword(e,a,t)}))},e.exports.warnTo=n.warnTo},function(e,t,s){\"use strict\";var r=s(10),n=s(6).Stream,i=s(137),o=s(0),a=\"win32\"===process.platform,c=process.stderr;var u=[\"host\",\"port\",\"database\",\"user\",\"password\"],h=u.length,l=u[h-1];function f(){var e=c instanceof n&&!0===c.writable;if(e){var t=Array.prototype.slice.call(arguments).concat(\"\\n\");c.write(o.format.apply(o,t))}}Object.defineProperty(e.exports,\"isWin\",{get:function(){return a},set:function(e){a=e}}),e.exports.warnTo=function(e){var t=c;return c=e,t},e.exports.getFileName=function(e){var t=e||process.env;return t.PGPASSFILE||(a?r.join(t.APPDATA||\"./\",\"postgresql\",\"pgpass.conf\"):r.join(t.HOME||\"./\",\".pgpass\"))},e.exports.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(process.env,\"PGPASSWORD\")&&(!!a||(t=t||\"<unkn>\",32768!=(61440&e.mode)?(f('WARNING: password file \"%s\" is not a plain file',t),!1):!(63&e.mode)||(f('WARNING: password file \"%s\" has group or world access; permissions should be u=rw (0600) or less',t),!1)))};var d=e.exports.match=function(e,t){return u.slice(0,-1).reduce((function(s,r,n){return 1==n&&Number(e[r]||5432)===Number(t[r])?s&&!0:s&&(\"*\"===t[r]||t[r]===e[r])}),!0)};e.exports.getPassword=function(e,t,s){var r,n=t.pipe(i());var o=function(e){t.destroy(),f(\"WARNING: error on reading file: %s\",e),s(void 0)};t.on(\"error\",o),n.on(\"data\",(function(t){var s=p(t);s&&m(s)&&d(e,s)&&(r=s[l],n.end())})).on(\"end\",(function(){t.destroy(),s(r)})).on(\"error\",o)};var p=e.exports.parseLine=function(e){if(e.length<11||e.match(/^\\s+#/))return null;for(var t=\"\",s=\"\",r=0,n=0,i={},o=function(t,s,r){var n=e.substring(s,r);Object.hasOwnProperty.call(process.env,\"PGPASS_NO_DEESCAPE\")||(n=n.replace(/\\\\([:\\\\])/g,\"$1\")),i[u[t]]=n},a=0;a<e.length-1;a+=1){if(t=e.charAt(a+1),s=e.charAt(a),r==h-1){o(r,n);break}a>=0&&\":\"==t&&\"\\\\\"!==s&&(o(r,n,a+1),n=a+2,r+=1)}return i=Object.keys(i).length===h?i:null},m=e.exports.isValidEntry=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return\"*\"===e||(e=Number(e),isFinite(e)&&e>0&&e<9007199254740992&&Math.floor(e)===e)},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},s=0;s<u.length;s+=1){if(!(0,t[s])(e[u[s]]||\"\"))return!1}return!0}},function(e,t,s){\"use strict\";const{Transform:r}=s(6),{StringDecoder:n}=s(77),i=Symbol(\"last\"),o=Symbol(\"decoder\");function a(e,t,s){let r;if(this.overflow){if(r=this[o].write(e).split(this.matcher),1===r.length)return s();r.shift(),this.overflow=!1}else this[i]+=this[o].write(e),r=this[i].split(this.matcher);this[i]=r.pop();for(let e=0;e<r.length;e++)try{u(this,this.mapper(r[e]))}catch(e){return s(e)}this.overflow=this[i].length>this.maxLength,!this.overflow||this.skipOverflow?s():s(new Error(\"maximum buffer reached\"))}function c(e){if(this[i]+=this[o].end(),this[i])try{u(this,this.mapper(this[i]))}catch(t){return e(t)}e()}function u(e,t){void 0!==t&&e.push(t)}function h(e){return e}e.exports=function(e,t,s){switch(e=e||/\\r?\\n/,t=t||h,s=s||{},arguments.length){case 1:\"function\"==typeof e?(t=e,e=/\\r?\\n/):\"object\"!=typeof e||e instanceof RegExp||e[Symbol.split]||(s=e,e=/\\r?\\n/);break;case 2:\"function\"==typeof e?(s=t,t=e,e=/\\r?\\n/):\"object\"==typeof t&&(s=t,t=h)}(s=Object.assign({},s)).autoDestroy=!0,s.transform=a,s.flush=c,s.readableObjectMode=!0;const u=new r(s);return u[i]=\"\",u[o]=new n(\"utf8\"),u.matcher=e,u.mapper=t,u.maxLength=s.maxLength,u.skipOverflow=s.skipOverflow||!1,u.overflow=!1,u._destroy=function(e,t){this._writableState.errorEmitted=!1,t(e)},u}},function(e,t,s){\"use strict\";const r=s(11).EventEmitter,n=function(){},i=(e,t)=>{const s=e.findIndex(t);return-1===s?void 0:e.splice(s,1)[0]};class o{constructor(e,t,s){this.client=e,this.idleListener=t,this.timeoutId=s}}class a{constructor(e){this.callback=e}}function c(e,t){if(t)return{callback:t,result:void 0};let s,r;return{callback:function(e,t){e?s(e):r(t)},result:new e((function(e,t){r=e,s=t})).catch(e=>{throw Error.captureStackTrace(e),e})}}e.exports=class extends r{constructor(e,t){super(),this.options=Object.assign({},e),null!=e&&\"password\"in e&&Object.defineProperty(this.options,\"password\",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),null!=e&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,\"key\",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||t||s(54).Client,this.Promise=this.options.Promise||global.Promise,void 0===this.options.idleTimeoutMillis&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log(\"pulse queue\"),this.ended)return void this.log(\"pulse queue ended\");if(this.ending)return this.log(\"pulse queue on ending\"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),void(this._clients.length||(this.ended=!0,this._endCallback()));if(!this._pendingQueue.length)return void this.log(\"no queued requests\");if(!this._idle.length&&this._isFull())return;const e=this._pendingQueue.shift();if(this._idle.length){const t=this._idle.pop();clearTimeout(t.timeoutId);const s=t.client;s.ref&&s.ref();const r=t.idleListener;return this._acquireClient(s,e,r,!1)}if(!this._isFull())return this.newClient(e);throw new Error(\"unexpected condition\")}_remove(e){const t=i(this._idle,t=>t.client===e);void 0!==t&&clearTimeout(t.timeoutId),this._clients=this._clients.filter(t=>t!==e),e.end(),this.emit(\"remove\",e)}connect(e){if(this.ending){const t=new Error(\"Cannot use a pool after calling end on the pool\");return e?e(t):this.Promise.reject(t)}const t=c(this.Promise,e),s=t.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new a(t.callback)),s;const e=(e,s,r)=>{clearTimeout(n),t.callback(e,s,r)},r=new a(e),n=setTimeout(()=>{i(this._pendingQueue,t=>t.callback===e),r.timedOut=!0,t.callback(new Error(\"timeout exceeded when trying to connect\"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(r),s}return this.newClient(new a(t.callback)),s}newClient(e){const t=new this.Client(this.options);this._clients.push(t);const s=function(e,t){return function s(r){r.client=t,t.removeListener(\"error\",s),t.on(\"error\",()=>{e.log(\"additional client error after disconnection due to error\",r)}),e._remove(t),e.emit(\"error\",r,t)}}(this,t);let r;this.log(\"checking client timeout\");let i=!1;this.options.connectionTimeoutMillis&&(r=setTimeout(()=>{this.log(\"ending client due to timeout\"),i=!0,t.connection?t.connection.stream.destroy():t.end()},this.options.connectionTimeoutMillis)),this.log(\"connecting new client\"),t.connect(o=>{if(r&&clearTimeout(r),t.on(\"error\",s),!o){if(this.log(\"new client connected\"),0!==this.options.maxLifetimeSeconds){const e=setTimeout(()=>{this.log(\"ending client due to expired lifetime\"),this._expired.add(t);-1!==this._idle.findIndex(e=>e.client===t)&&this._acquireClient(t,new a((e,t,s)=>s()),s,!1)},1e3*this.options.maxLifetimeSeconds);e.unref(),t.once(\"end\",()=>clearTimeout(e))}return this._acquireClient(t,e,s,!0)}this.log(\"client failed to connect\",o),this._clients=this._clients.filter(e=>e!==t),i&&(o.message=\"Connection terminated due to connection timeout\"),this._pulseQueue(),e.timedOut||e.callback(o,void 0,n)})}_acquireClient(e,t,s,r){r&&this.emit(\"connect\",e),this.emit(\"acquire\",e),e.release=this._releaseOnce(e,s),e.removeListener(\"error\",s),t.timedOut?r&&this.options.verify?this.options.verify(e,e.release):e.release():r&&this.options.verify?this.options.verify(e,s=>{if(s)return e.release(s),t.callback(s,void 0,n);t.callback(void 0,e,e.release)}):t.callback(void 0,e,e.release)}_releaseOnce(e,t){let s=!1;return r=>{s&&function(){throw new Error(\"Release called on client which has already been released to the pool.\")}(),s=!0,this._release(e,t,r)}}_release(e,t,s){if(e.on(\"error\",t),e._poolUseCount=(e._poolUseCount||0)+1,this.emit(\"release\",s,e),s||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log(\"remove expended client\"),this._remove(e),void this._pulseQueue();if(this._expired.has(e))return this.log(\"remove expired client\"),this._expired.delete(e),this._remove(e),void this._pulseQueue();let r;this.options.idleTimeoutMillis&&(r=setTimeout(()=>{this.log(\"remove idle client\"),this._remove(e)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&r.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new o(e,t,r)),this._pulseQueue()}query(e,t,s){if(\"function\"==typeof e){const t=c(this.Promise,e);return setImmediate((function(){return t.callback(new Error(\"Passing a function as the first parameter to pool.query is not supported\"))})),t.result}\"function\"==typeof t&&(s=t,t=void 0);const r=c(this.Promise,s);return s=r.callback,this.connect((r,n)=>{if(r)return s(r);let i=!1;const o=e=>{i||(i=!0,n.release(e),s(e))};n.once(\"error\",o),this.log(\"dispatching query\");try{n.query(e,t,(e,t)=>{if(this.log(\"query dispatched\"),n.removeListener(\"error\",o),!i)return i=!0,n.release(e),e?s(e):s(void 0,t)})}catch(r){return n.release(r),s(r)}}),r.result}end(e){if(this.log(\"ending\"),this.ending){const t=new Error(\"Called end on pool more than once\");return e?e(t):this.Promise.reject(t)}this.ending=!0;const t=c(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,t)=>e+(this._expired.has(t)?1:0),0)}get totalCount(){return this._clients.length}}},function(e,t,s){\"use strict\";var r;try{r=s(!function(){var e=new Error(\"Cannot find module 'pg-native'\");throw e.code=\"MODULE_NOT_FOUND\",e}())}catch(e){throw e}var n=s(58),i=s(11).EventEmitter,o=s(0),a=s(59),c=s(140),u=e.exports=function(e){i.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new n(e.types),this.native=new r({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var t=this.connectionParameters=new a(e);e.nativeConnectionString&&(t.nativeConnectionString=e.nativeConnectionString),this.user=t.user,Object.defineProperty(this,\"password\",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};u.Query=c,o.inherits(u,i),u.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick(()=>{t.native=this.native,t.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},u.prototype._connect=function(e){var t=this;this._connecting?process.nextTick(()=>e(new Error(\"Client has already been connected. You cannot reuse a client.\"))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString((function(s,r){if(t.connectionParameters.nativeConnectionString&&(r=t.connectionParameters.nativeConnectionString),s)return e(s);t.native.connect(r,(function(s){if(s)return t.native.end(),e(s);t._connected=!0,t.native.on(\"error\",(function(e){t._queryable=!1,t._errorAllQueries(e),t.emit(\"error\",e)})),t.native.on(\"notification\",(function(e){t.emit(\"notification\",{channel:e.relname,payload:e.extra})})),t.emit(\"connect\"),t._pulseQueryQueue(!0),e()}))})))},u.prototype.connect=function(e){if(!e)return new this._Promise((e,t)=>{this._connect(s=>{s?t(s):e()})});this._connect(e)},u.prototype.query=function(e,t,s){var r,n,i,o,a;if(null==e)throw new TypeError(\"Client was passed a null or undefined query\");if(\"function\"==typeof e.submit)i=e.query_timeout||this.connectionParameters.query_timeout,n=r=e,\"function\"==typeof t&&(e.callback=t);else if(i=this.connectionParameters.query_timeout,!(r=new c(e,t,s)).callback){let e,t;n=new this._Promise((s,r)=>{e=s,t=r}).catch(e=>{throw Error.captureStackTrace(e),e}),r.callback=(s,r)=>s?t(s):e(r)}return i&&(a=r.callback,o=setTimeout(()=>{var e=new Error(\"Query read timeout\");process.nextTick(()=>{r.handleError(e,this.connection)}),a(e),r.callback=()=>{};var t=this._queryQueue.indexOf(r);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()},i),r.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this._queryable?this._ending?(r.native=this.native,process.nextTick(()=>{r.handleError(new Error(\"Client was closed and is not queryable\"))}),n):(this._queryQueue.push(r),this._pulseQueryQueue(),n):(r.native=this.native,process.nextTick(()=>{r.handleError(new Error(\"Client has encountered a connection error and is not queryable\"))}),n)},u.prototype.end=function(e){var t,s=this;return this._ending=!0,this._connected||this.once(\"connect\",this.end.bind(this,e)),e||(t=new this._Promise((function(t,s){e=e=>e?s(e):t()}))),this.native.end((function(){s._errorAllQueries(new Error(\"Connection terminated\")),process.nextTick(()=>{s.emit(\"end\"),e&&e()})})),t},u.prototype._hasActiveQuery=function(){return this._activeQuery&&\"error\"!==this._activeQuery.state&&\"end\"!==this._activeQuery.state},u.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(t){this._activeQuery=t,t.submit(this);var s=this;t.once(\"_done\",(function(){s._pulseQueryQueue()}))}else e||this.emit(\"drain\")}},u.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel((function(){})):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},u.prototype.ref=function(){},u.prototype.unref=function(){},u.prototype.setTypeParser=function(e,t,s){return this._types.setTypeParser(e,t,s)},u.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}},function(e,t,s){\"use strict\";var r=s(11).EventEmitter,n=s(0),i=s(23),o=e.exports=function(e,t,s){r.call(this),e=i.normalizeQueryConfig(e,t,s),this.text=e.text,this.values=e.values,this.name=e.name,this.queryMode=e.queryMode,this.callback=e.callback,this.state=\"new\",this._arrayMode=\"array\"===e.rowMode,this._emitRowEvents=!1,this.on(\"newListener\",function(e){\"row\"===e&&(this._emitRowEvents=!0)}.bind(this))};n.inherits(o,r);var a={sqlState:\"code\",statementPosition:\"position\",messagePrimary:\"message\",context:\"where\",schemaName:\"schema\",tableName:\"table\",columnName:\"column\",dataTypeName:\"dataType\",constraintName:\"constraint\",sourceFile:\"file\",sourceLine:\"line\",sourceFunction:\"routine\"};o.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var s in t){e[a[s]||s]=t[s]}this.callback?this.callback(e):this.emit(\"error\",e),this.state=\"error\"},o.prototype.then=function(e,t){return this._getPromise().then(e,t)},o.prototype.catch=function(e){return this._getPromise().catch(e)},o.prototype._getPromise=function(){return this._promise||(this._promise=new Promise(function(e,t){this._once(\"end\",e),this._once(\"error\",t)}.bind(this))),this._promise},o.prototype.submit=function(e){this.state=\"running\";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var s=function(s,r,n){if(e.native.arrayMode=!1,setImmediate((function(){t.emit(\"_done\")})),s)return t.handleError(s);t._emitRowEvents&&(n.length>1?r.forEach((e,s)=>{e.forEach(e=>{t.emit(\"row\",e,n[s])})}):r.forEach((function(e){t.emit(\"row\",e,n)}))),t.state=\"end\",t.emit(\"end\",n),t.callback&&t.callback(null,n)};if(process.domain&&(s=process.domain.bind(s)),this.name){this.name.length>63&&(console.error(\"Warning! Postgres only supports 63 characters for query names.\"),console.error(\"You supplied %s (%s)\",this.name,this.name.length),console.error(\"This can cause conflicts and silent errors executing queries\"));var r=(this.values||[]).map(i.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){const e=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return s(e)}return e.native.execute(this.name,r,s)}return e.native.prepare(this.name,this.text,r.length,(function(n){return n?s(n):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,r,s))}))}if(this.values){if(!Array.isArray(this.values)){const e=new Error(\"Query values must be an array\");return s(e)}var n=this.values.map(i.prepareValue);e.native.query(this.text,n,s)}else\"extended\"===this.queryMode?e.native.query(this.text,[],s):e.native.query(this.text,s)}}]));","extractedComments":[]}